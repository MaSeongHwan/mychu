<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mychu</title>
  <link rel="stylesheet" href="/static/main.css">
</head>
<body>
  <header>
    <a href="login.html" class="logo"></a>
    <nav>
      <a href="/pages/index.html">í™ˆ</a>
      <a href="/pages/tv.html">TV ì‡¼</a>
      <a href="/pages/movie.html">ì˜í™”</a>
      <a href="/pages/trending.html">ìš”ì¦˜ ëŒ€ì„¸ ì½˜í…ì¸ </a>
      <a href="/pages/mylist.html">ë‚´ê°€ ì°œí•œ ë¦¬ìŠ¤íŠ¸</a>
      <a href="/pages/contents.html">content</a>
    </nav>
    </div>
    <div class="header-right">
    <input type="search" placeholder="ê²€ìƒ‰" aria-label="ê²€ìƒ‰" />
    <button class="icon-button notification" aria-label="ì•Œë¦¼">
        ğŸ””<span class="badge">7</span>
    </button>
    
    </div>
  </header>

  <div class="hero"></div>

<div class="section">
  <h2>ì˜¤ëŠ˜ì˜ ì¸ê¸°ì‘ Top 10</h2>
  <div class="slider-container" id="top10-slider">  <!-- id ì¶”ê°€ -->
    <div class="slider"></div>
  </div>
</div>

<div class="section">
  <h2>ì†Œê¸ˆë‹˜, ì˜¤ëŠ˜ì€ ë”°ë“¯í•œ íë§ ì˜í™”ê°€ ì–´ìš¸ë ¤ìš”</h2>
  <div class="slider-container" id="emotion-slider">  <!-- id ì¶”ê°€ -->
    <div class="slider"></div>
  </div>
</div>

<div class="section">
  <h2>ìµœê·¼ ì‹œì²­ ì½˜í…ì¸ </h2>
  <div class="slider-container" id="recent-slider">  <!-- id ì¶”ê°€ -->
    <div class="slider"></div>
  </div>
</div>

<div class="section">
  <h2>ë¹„ìŠ·í•œ ì—°ë ¹ëŒ€ê°€ ì‹œì²­ì¤‘ì¸ ì½˜í…ì¸ </h2>
  <div class="slider-container" id="age-slider">  <!-- id ì¶”ê°€ -->
    <div class="slider"></div>
  </div>
</div>

<script>
    async function loadRecommendations(type, elementId) {
        try {
            // URLì„ /recommendations/randomìœ¼ë¡œ ìˆ˜ì •
            const response = await fetch(`http://127.0.0.1:8000/recommendations/random?type=${type}&count=10`);
            const data = await response.json();
            
            const slider = document.querySelector(`#${elementId} .slider`);
            slider.innerHTML = data.items.map(item => `
                <div class="content-item">
                    <img src="${item.poster_path || '#'}" alt="${item.asset_nm}">
                    <h3>${item.asset_nm}</h3>
                    <p>${item.genre || ''}</p>
                    ${item.actr_disp ? `<p class="actors">${item.actr_disp}</p>` : ''}
                </div>
            `).join('');
        } catch (error) {
            console.error('Error:', error);
        }
    }

    window.addEventListener('DOMContentLoaded', () => {
        loadRecommendations('movie', 'top10-slider');
        loadRecommendations('drama', 'emotion-slider');
        loadRecommendations(null, 'recent-slider');
        loadRecommendations(null, 'age-slider');
    });
</script>
</body>
</html>